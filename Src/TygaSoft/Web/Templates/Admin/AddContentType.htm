<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
</head>
<body>
<form id="dlgFm" method="post">
    <div class="row">
        <span class="fl rl">所属内容类型：</span>
        <div class="fl ml10">
            <span id="lbParent"></span>
            <input type="hidden" id="hParentId" name="hParentId" />
        </div>
        <span class="clr"></span>
    </div>
    <div class="row mt10">
        <span class="fl rl"><b class="cr">*</b>内容类型名称：</span>
        <div class="fl ml10">
            <input type="text" id="txtName" name="txtName" tabindex="1" maxlength="256" class="easyui-validatebox txt" data-options="required:true" />
        </div>
        <span class="clr"></span>
    </div>
    <div class="row mt10">
        <span class="fl rl"><b class="cr">*</b>内容类型代号：</span>
        <div class="fl ml10">
            <input type="text" id="txtCode" name="txtCode" tabindex="2" maxlength="50" class="easyui-validatebox txt" data-options="required:true" />
        </div>
        <span class="clr"></span>
    </div>
    <div class="row mt10">
        <span class="fl rl">排序：</span>
        <div class="fl ml10">
            <input type="text" id="txtSort" name="txtSort" tabindex="3" maxlength="9" class="easyui-validatebox txt" data-options="validType:'number'" />
        </div>
        <span class="clr"></span>
    </div>
    <input type="hidden" id="hId" value="" />
    <input type="hidden" id="hCurrExpandNode" value="" />
</form>

<script type="text/javascript">
    var dlgFun = {

        Add: function (node) {
            $('#dlgFm').form('clear');
            $('#lbParent').text(node.text);
            $('#hParentId').val(node.id);
            $('#hId').val("");
            $("#hCurrExpandNode").val(node.id);
        },
        Edit: function (node, t) {
            $('#dlgFm').form('clear');
            var parentName = "";
            var parentNode = t.tree('getParent', node.target);
            if (parentNode) parentName = parentNode.text;
            $('#lbParent').text(parentName);
            $('#txtName').val(node.text);
            $('#txtCode').val(node.attributes.typeCode);
            $('#txtSort').val(node.attributes.sort);
            $('#hParentId').val(node.attributes.parentId);
            $('#hId').val(node.id);
            $("#hCurrExpandNode").val(node.id);
        }
    }
</script>
</body>
</html>
